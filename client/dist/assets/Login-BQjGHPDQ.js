import{r as t,a as b,u as f,b as j,j as e,N as E,F as v,c as N,L as U}from"./index-BM_GwbGa.js";const w=()=>{const[o,u]=t.useState(""),[n,m]=t.useState(""),[i,d]=t.useState(!1),[a,r]=t.useState(null),p=b(s=>s.setAuthUser),g=f(),[h,{loading:c}]=j(U,{variables:{loginUserInput:{usernameOrEmail:o,password:n}},onCompleted:s=>{if(s&&s.LoginUser)return p(s.LoginUser),g("/",{replace:!0})},onError:s=>{if(s){const l=s.toString().split(":").pop();r(l)}},update:(s,l)=>{s.writeQuery({query:N,data:{FetchActiveUser:l.data.LoginUser}})}});t.useEffect(()=>{d(c||a!==null)},[c,a]);const x=s=>{if(s.preventDefault(),!o||!n)return r("Please provide all user details to login!");h()};return e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsxs("div",{className:"container mt-5 col-12 col-md-8 col-lg-4",children:[e.jsx("h1",{className:"text-center",children:"Log In"}),a&&e.jsxs("div",{className:"alert alert-dismissible alert-danger mt-5",children:[e.jsx("button",{type:"button",className:"btn-close",onClick:()=>r(null)}),a]}),e.jsxs("form",{autoComplete:"off",noValidate:!0,onSubmit:x,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"usernameOrEmail",className:"form-label mt-4",children:"Username or Email"}),e.jsx("input",{type:"email",className:"form-control",id:"usernameOrEmail",placeholder:"Username or email",onChange:s=>u(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"form-label mt-4",children:"Password"}),e.jsx("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",autoComplete:"off",onChange:s=>m(s.target.value)})]}),e.jsx("div",{className:"d-grid gap-2 mt-5",children:e.jsx("button",{className:`btn btn-lg btn-success ${i??"disabled"}`,type:"submit",disabled:i,children:"Login"})})]})]}),e.jsx(v,{})]})};export{w as default};
