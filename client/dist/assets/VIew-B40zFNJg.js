const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C8Xb3lMI.js","assets/index-CKQKzKKF.css"])))=>i.map(i=>d[i]);
import{r as s,a as x,e as w,u as L,c as P,f as U,j as e,N as M,I as k,F as G,_ as Q}from"./index-C8Xb3lMI.js";import{a as A,F as E}from"./Image-xDgVqt4R.js";import{u as R}from"./useQuery-EVoHiL6I.js";const T=s.lazy(()=>Q(()=>import("./index-C8Xb3lMI.js").then(o=>o.G),__vite__mapDeps([0,1]))),$=()=>{const[o,l]=s.useState(null),[h,b]=s.useState(!1),[a,p]=s.useState(-1),[m,g]=s.useState(null),[I,f]=s.useState(null),r=x(t=>t.userImages),v=x(t=>t.removeUserImage),n=w(),i=L(),{data:u,error:d,loading:j}=R(A,{variables:{id:n.id}}),[_,{loading:N}]=P(U,{variables:{id:n.id},onCompleted:t=>{if(t.DeleteImage)return v(n.id),i("/gallery")},onError:t=>{const c=t.toString().split(":").pop();l(c)},update:(t,c)=>{if(c.data.DeleteImage){const{FetchUserImagesQuery:F}=t.readQuery({query:E}),C=F.filter(D=>D._id!==n.id);t.writeQuery({query:E,data:{FetchUserImagesQuery:C}})}}});s.useEffect(()=>{if(d){const t=d.toString().split(":").pop();l(t)}},[d]),s.useEffect(()=>{p(r.findIndex(t=>t._id===n.id))},[n.id,r]),s.useEffect(()=>{if(a<=0)return g(null);g(r[a-1]._id)},[a,r]),s.useEffect(()=>{if(a>=r.length-1)return f(null);f(r[a+1]._id)},[a,r]);const y=()=>{if(m!==null)return i(`/view/${m}`)},S=()=>{if(I!==null)return i(`/view/${I}`)};return j||N?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsx(M,{}),e.jsxs("div",{className:"container mt-5",children:[o&&e.jsxs("div",{className:"alert alert-dismissible alert-danger mt-5",children:[e.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(null)}),o]}),e.jsx("div",{className:"col-sm-12 col-md-10 mx-auto",children:u&&e.jsx(k,{src:u.FetchUserImage.url,alt:u.FetchUserImage.cloudImageName,onLoad:()=>b(!0)})}),h&&e.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-center mt-5 gap-3",children:[e.jsx("button",{className:"btn btn-warning",onClick:()=>i("/gallery"),children:"Gallery"}),e.jsx("button",{className:"btn btn-info",disabled:a<=0,onClick:y,children:"Previous"}),e.jsx("button",{className:"btn btn-info",disabled:a>=r.length-1,onClick:S,children:"Next"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>_(),children:"Delete"})]})]}),e.jsx(G,{})]})};export{$ as default};
