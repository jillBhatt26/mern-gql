import{r as t,u as f,a as S,b as v,j as e,N,F as U,c as E,S as w}from"./index-eJx4SO3I.js";const C=()=>{const[i,d]=t.useState(""),[o,m]=t.useState(""),[u,p]=t.useState(""),[r,l]=t.useState(null),[g,h]=t.useState(!1),c=f(),b=S(s=>s.setAuthUser),[x,{loading:n}]=v(w,{variables:{signupUserInput:{username:o,email:i,password:u}},onCompleted:s=>{if(s&&s.SignupUser&&c)return b(s.SignupUser),c("/",{replace:!0})},onError:s=>{if(s){const a=s.toString().split(":").pop();l(a)}},update:(s,a)=>{a&&a.data&&a.data.SignupUser&&s.writeQuery({query:E,data:{FetchActiveUser:a.data.SignupUser}})}});t.useEffect(()=>{h(n||r!==null)},[n,r]);const j=s=>{s.preventDefault(),(!i||!o||!u)&&l("All fields required to sign up!"),x()};return e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsxs("div",{className:"container mt-5 col-12 col-md-8 col-lg-4",children:[e.jsx("h1",{className:"text-center",children:"Sign Up"}),r&&e.jsxs("div",{className:"alert alert-dismissible alert-danger mt-5",children:[e.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(null)}),r]}),e.jsxs("form",{autoComplete:"off",noValidate:!0,onSubmit:j,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"form-label mt-4",children:"Email address"}),e.jsx("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",onChange:s=>d(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"form-label mt-4",children:"Username"}),e.jsx("input",{type:"text",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username",onChange:s=>m(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"form-label mt-4",children:"Password"}),e.jsx("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",autoComplete:"off",onChange:s=>p(s.target.value)})]}),e.jsx("div",{className:"d-grid gap-2 mt-5",children:e.jsx("button",{className:"btn btn-lg btn-success",type:"submit",disabled:g,children:n?e.jsx("div",{className:"progress",children:e.jsx("div",{className:"progress-bar progress-bar-striped bg-info",role:"progressbar",style:{width:"100%"},"aria-valuenow":100,"aria-valuemin":0,"aria-valuemax":100})}):e.jsx("span",{children:"Signup"})})})]})]}),e.jsx(U,{})]})};export{C as default};
