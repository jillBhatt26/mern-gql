const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-klD3Pqlt.js","assets/index-DTCJZlBg.css"])))=>i.map(i=>d[i]);
import{R as m,r as d,a as N,j as a,L as U,I as F,A as R,b as P,N as T,F as k,_ as A}from"./index-klD3Pqlt.js";import{F as D}from"./Image-BkgnCfEB.js";import{u as O}from"./useQuery-bC1-zd4Y.js";function p(){return p=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(o[t]=r[t])}return o},p.apply(this,arguments)}function L(o,e){o.prototype=Object.create(e.prototype),o.prototype.constructor=o,_(o,e)}function _(o,e){return _=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},_(o,e)}var w=function(o){L(e,o);function e(){var t;return t=o.call(this)||this,t.state={columns:[],childRefs:[],hasDistributed:!1},t}var r=e.prototype;return r.componentDidUpdate=function(){!this.state.hasDistributed&&!this.props.sequential&&this.distributeChildren()},e.getDerivedStateFromProps=function(n,s){var u=n.children,i=n.columnsCount,l=i!==s.columns.length;return s&&u===s.children&&!l?null:p({},e.getEqualCountColumns(u,i),{children:u,hasDistributed:!1})},r.shouldComponentUpdate=function(n){return n.children!==this.state.children||n.columnsCount!==this.props.columnsCount},r.distributeChildren=function(){var n=this,s=this.props,u=s.children,i=s.columnsCount,l=Array(i).fill(0),c=this.state.childRefs.every(function(h){return h.current.getBoundingClientRect().height});if(c){var f=Array.from({length:i},function(){return[]}),v=0;m.Children.forEach(u,function(h){if(h&&m.isValidElement(h)){var C=n.state.childRefs[v].current.getBoundingClientRect().height,y=l.indexOf(Math.min.apply(Math,l));l[y]+=C,f[y].push(h),v++}}),this.setState(function(h){return p({},h,{columns:f,hasDistributed:!0})})}},e.getEqualCountColumns=function(n,s){var u=Array.from({length:s},function(){return[]}),i=0,l=[];return m.Children.forEach(n,function(c){if(c&&m.isValidElement(c)){var f=m.createRef();l.push(f),u[i%s].push(m.createElement("div",{style:{display:"flex",justifyContent:"stretch"},key:i,ref:f},c)),i++}}),{columns:u,childRefs:l}},r.renderColumns=function(){var n=this.props,s=n.gutter,u=n.itemTag,i=n.itemStyle;return this.state.columns.map(function(l,c){return m.createElement(u,{key:c,style:p({display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:s},i)},l.map(function(f){return f}))})},r.render=function(){var n=this.props,s=n.gutter,u=n.className,i=n.style,l=n.containerTag;return m.createElement(l,{style:p({display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:s},i),className:u},this.renderColumns())},e}(m.Component);w.propTypes={};w.defaultProps={columnsCount:3,gutter:"0",className:null,style:{},containerTag:"div",itemTag:"div",itemStyle:{},sequential:!1};var B=1,W="10px",S=typeof window<"u"?d.useLayoutEffect:d.useEffect,$=function(){var e=d.useState(!1),r=e[0],t=e[1];return S(function(){t(!0)},[]),r},q=function(){var e=$(),r=d.useState(typeof window<"u"?window.innerWidth:0),t=r[0],n=r[1],s=d.useCallback(function(){e&&n(window.innerWidth)},[e]);return S(function(){if(e)return window.addEventListener("resize",s),s(),function(){return window.removeEventListener("resize",s)}},[e,s]),t},b=function(e){var r=e.columnsCountBreakPoints,t=r===void 0?{350:1,750:2,900:3}:r,n=e.gutterBreakPoints,s=n===void 0?{}:n,u=e.children,i=e.className,l=i===void 0?null:i,c=e.style,f=c===void 0?null:c,v=q(),h=d.useCallback(function(g,j){var E=Object.keys(g).sort(function(x,M){return x-M}),I=E.length>0?g[E[0]]:j;return E.forEach(function(x){x<v&&(I=g[x])}),I},[v]),C=d.useMemo(function(){return h(t,B)},[h,t]),y=d.useMemo(function(){return h(s,W)},[h,s]);return m.createElement("div",{className:l,style:f},m.Children.map(u,function(g,j){return m.cloneElement(g,{key:j,columnsCount:C,gutter:y})}))};b.propTypes={};const z=()=>{const[o,e]=d.useState(!1),r=N(t=>t.userImages);return r.length>0?a.jsx("div",{className:"container",children:a.jsx(b,{columnsCountBreakPoints:{350:1,750:2,900:3},gutterBreakpoints:{350:"12px",750:"16px",900:"24px"},children:a.jsx(w,{children:r.length>0&&r.map((t,n)=>a.jsx("div",{children:a.jsx(U,{to:`/view/${t._id}`,children:a.jsx(F,{src:t.url,alt:t.cloudImageName})})},n))})})}):a.jsxs("div",{className:"container mt-5 mx-auto",children:[a.jsx("div",{className:"w-100",children:a.jsxs("h3",{className:"text-center",children:["You haven't added any images yet.",a.jsx("div",{className:"d-grid mt-5",children:a.jsx("div",{className:"col-sm-12 col-md-4 mx-auto",children:a.jsx("button",{type:"button",className:"btn btn-success",onClick:()=>e(!0),children:"Add image now"})})})]})}),a.jsx(R,{showAddImageFormModal:o,setShowAddImageFormModal:e})]})},G=d.lazy(()=>A(()=>import("./index-klD3Pqlt.js").then(o=>o.H),__vite__mapDeps([0,1]))),Y=()=>{const[o,e]=d.useState(!0),[r,t]=d.useState(null),{data:n,error:s,loading:u}=O(D,{fetchPolicy:"network-only"}),i=N(c=>c.setUserImages),l=P(c=>c.authUser);return d.useEffect(()=>{e(u)},[u]),d.useEffect(()=>{!n||!n.FetchUserImagesQuery||n.FetchUserImagesQuery&&i(n.FetchUserImagesQuery)},[n,i]),d.useEffect(()=>{if(s){const c=s.toString().split(":").pop();t(c)}},[s]),o?a.jsx(G,{}):a.jsxs(a.Fragment,{children:[a.jsx(T,{}),a.jsxs("div",{className:"container",children:[a.jsxs("div",{className:"my-5",children:[l&&a.jsxs("h3",{className:"text-center",children:[l.username,"'s Gallery"]}),r&&a.jsxs("div",{className:"alert alert-dismissible alert-danger mt-5",children:[a.jsx("button",{type:"button",className:"btn-close",onClick:()=>t(null)}),r]})]}),a.jsx(z,{})]}),a.jsx(k,{})]})};export{Y as default};
