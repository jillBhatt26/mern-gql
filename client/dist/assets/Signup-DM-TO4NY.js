import{r as a,u as j,a as S,b as U,j as e,N,F as v,c as E,S as w}from"./index-BM_GwbGa.js";const C=()=>{const[l,d]=a.useState(""),[i,m]=a.useState(""),[o,p]=a.useState(""),[r,n]=a.useState(null),[g,h]=a.useState(!1),u=j(),b=S(s=>s.setAuthUser),[x,{loading:c}]=U(w,{variables:{signupUserInput:{username:i,email:l,password:o}},onCompleted:s=>{if(s&&s.SignupUser&&u)return b(s.SignupUser),u("/",{replace:!0})},onError:s=>{if(s){const t=s.toString().split(":").pop();n(t)}},update:(s,t)=>{t&&t.data&&t.data.SignupUser&&s.writeQuery({query:E,data:{FetchActiveUser:t.data.SignupUser}})}});a.useEffect(()=>{h(c||r!==null)},[c,r]);const f=s=>{s.preventDefault(),(!l||!i||!o)&&n("All fields required to sign up!"),x()};return e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsxs("div",{className:"container mt-5 col-12 col-md-8 col-lg-4",children:[e.jsx("h1",{className:"text-center",children:"Sign Up"}),r&&e.jsxs("div",{className:"alert alert-dismissible alert-danger mt-5",children:[e.jsx("button",{type:"button",className:"btn-close",onClick:()=>n(null)}),r]}),e.jsxs("form",{autoComplete:"off",noValidate:!0,onSubmit:f,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"form-label mt-4",children:"Email address"}),e.jsx("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",onChange:s=>d(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"form-label mt-4",children:"Username"}),e.jsx("input",{type:"text",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username",onChange:s=>m(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"form-label mt-4",children:"Password"}),e.jsx("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",autoComplete:"off",onChange:s=>p(s.target.value)})]}),e.jsx("div",{className:"d-grid gap-2 mt-5",children:e.jsx("button",{className:"btn btn-lg btn-success",type:"submit",disabled:g,children:"Signup"})})]})]}),e.jsx(v,{})]})};export{C as default};
