const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B7pc3hun.js","assets/index-DTCJZlBg.css"])))=>i.map(i=>d[i]);
import{r as t,c as h,d as E,e as p,D as N,j as e,T,N as S,F as C,_ as w}from"./index-B7pc3hun.js";import{C as U}from"./ConfirmDeleteModal-BegHLXK0.js";import{u as v}from"./useQuery-CurCRE15.js";const D=({todo:s})=>{const[o,d]=t.useState(!1),[l,m]=t.useState(!1),[x,n]=t.useState(null),[i,c]=t.useState("text-primary"),a=h(r=>r.userTodos),j=h(r=>r.setUserTodos),[f,{loading:b}]=E(N,{variables:{id:s.id},onCompleted:r=>{r.DeleteTodo&&(j(a.filter(u=>u.id!==s.id)),d(!1))},onError:r=>{const u=r.toString().split(":").pop();n(u)},update:(r,{data:u})=>{u.DeleteTodo&&r.writeQuery({query:p,data:{todos:a.filter(g=>g.id!==s.id)}})}});return t.useEffect(()=>{if(s.status.toUpperCase()==="PENDING")return c("text-danger");if(s.status.toUpperCase()==="PROGRESS")return c("text-info");if(s.status.toUpperCase()==="COMPLETE")return c("text-success")},[s.status]),e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:s.name}),e.jsx("td",{children:s.description}),e.jsx("td",{className:i,children:s.status}),e.jsxs("td",{className:"d-flex gap-3",children:[e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>m(!0),children:"Update"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>d(!0),children:"Delete"})]}),e.jsx(U,{isOpen:o,onClose:()=>d(!1),onConfirm:f,message:b?"Loading...":"This action is irreversible. Your todo will be permanently deleted. Wish to proceed?",confirmButtonLabel:"Delete Todo",error:x}),l&&e.jsx(T,{showTodoFormModal:l,setShowTodoFormModal:m,purpose:"Update",todoToUpdate:s})]})},M=()=>{const s=h(o=>o.userTodos);return e.jsx(e.Fragment,{children:s.length>0&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Name"}),e.jsx("th",{scope:"col",children:"Description"}),e.jsx("th",{scope:"col",children:"Status"}),e.jsx("th",{scope:"col",children:"Actions"})]})}),e.jsx("tbody",{children:s.map(o=>e.jsx(D,{todo:o},o.id))})]})})})},y=t.lazy(()=>w(()=>import("./index-B7pc3hun.js").then(s=>s.K),__vite__mapDeps([0,1]))),O=()=>{const[s,o]=t.useState(null),[d,l]=t.useState(!1),m=h(a=>a.userTodos),x=h(a=>a.setUserTodos),{data:n,error:i,loading:c}=v(p,{fetchPolicy:"network-only"});return t.useEffect(()=>{if(i){const a=i.toString().split(":").pop();o(a)}},[i]),t.useEffect(()=>{n&&n.todos&&x(n.todos)},[n,x]),c?e.jsx(y,{}):e.jsxs(e.Fragment,{children:[e.jsx(S,{}),e.jsxs("div",{className:"container mt-5",children:[s&&e.jsxs("div",{className:"alert alert-dismissible alert-danger mt-5",children:[e.jsx("button",{type:"button",className:"btn-close",onClick:()=>o(null)}),s]}),m.length>0?e.jsx(M,{}):e.jsx("div",{className:"w-100",children:e.jsxs("h3",{className:"text-center",children:["You haven't added any todos yet.",e.jsx("div",{className:"d-grid mt-5",children:e.jsx("div",{className:"col-sm-12 col-md-4 mx-auto",children:e.jsx("button",{type:"button",className:"btn btn-success",onClick:()=>l(!0),children:"Add new todo"})})})]})})]}),e.jsx(C,{}),e.jsx(T,{showTodoFormModal:d,setShowTodoFormModal:l,purpose:"Add"})]})};export{O as default};
