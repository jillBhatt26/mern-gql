const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C8Xb3lMI.js","assets/index-CKQKzKKF.css"])))=>i.map(i=>d[i]);
import{R as m,r as c,a as N,j as a,L as M,I as U,A as R,N as P,F as T,_ as k}from"./index-C8Xb3lMI.js";import{F as D}from"./Image-xDgVqt4R.js";import{u as O}from"./useQuery-EVoHiL6I.js";function p(){return p=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(o[n]=r[n])}return o},p.apply(this,arguments)}function A(o,e){o.prototype=Object.create(e.prototype),o.prototype.constructor=o,_(o,e)}function _(o,e){return _=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},_(o,e)}var w=function(o){A(e,o);function e(){var n;return n=o.call(this)||this,n.state={columns:[],childRefs:[],hasDistributed:!1},n}var r=e.prototype;return r.componentDidUpdate=function(){!this.state.hasDistributed&&!this.props.sequential&&this.distributeChildren()},e.getDerivedStateFromProps=function(t,s){var l=t.children,i=t.columnsCount,u=i!==s.columns.length;return s&&l===s.children&&!u?null:p({},e.getEqualCountColumns(l,i),{children:l,hasDistributed:!1})},r.shouldComponentUpdate=function(t){return t.children!==this.state.children||t.columnsCount!==this.props.columnsCount},r.distributeChildren=function(){var t=this,s=this.props,l=s.children,i=s.columnsCount,u=Array(i).fill(0),h=this.state.childRefs.every(function(d){return d.current.getBoundingClientRect().height});if(h){var f=Array.from({length:i},function(){return[]}),g=0;m.Children.forEach(l,function(d){if(d&&m.isValidElement(d)){var C=t.state.childRefs[g].current.getBoundingClientRect().height,y=u.indexOf(Math.min.apply(Math,u));u[y]+=C,f[y].push(d),g++}}),this.setState(function(d){return p({},d,{columns:f,hasDistributed:!0})})}},e.getEqualCountColumns=function(t,s){var l=Array.from({length:s},function(){return[]}),i=0,u=[];return m.Children.forEach(t,function(h){if(h&&m.isValidElement(h)){var f=m.createRef();u.push(f),l[i%s].push(m.createElement("div",{style:{display:"flex",justifyContent:"stretch"},key:i,ref:f},h)),i++}}),{columns:l,childRefs:u}},r.renderColumns=function(){var t=this.props,s=t.gutter,l=t.itemTag,i=t.itemStyle;return this.state.columns.map(function(u,h){return m.createElement(l,{key:h,style:p({display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:s},i)},u.map(function(f){return f}))})},r.render=function(){var t=this.props,s=t.gutter,l=t.className,i=t.style,u=t.containerTag;return m.createElement(u,{style:p({display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:s},i),className:l},this.renderColumns())},e}(m.Component);w.propTypes={};w.defaultProps={columnsCount:3,gutter:"0",className:null,style:{},containerTag:"div",itemTag:"div",itemStyle:{},sequential:!1};var L=1,B="10px",S=typeof window<"u"?c.useLayoutEffect:c.useEffect,W=function(){var e=c.useState(!1),r=e[0],n=e[1];return S(function(){n(!0)},[]),r},$=function(){var e=W(),r=c.useState(typeof window<"u"?window.innerWidth:0),n=r[0],t=r[1],s=c.useCallback(function(){e&&t(window.innerWidth)},[e]);return S(function(){if(e)return window.addEventListener("resize",s),s(),function(){return window.removeEventListener("resize",s)}},[e,s]),n},b=function(e){var r=e.columnsCountBreakPoints,n=r===void 0?{350:1,750:2,900:3}:r,t=e.gutterBreakPoints,s=t===void 0?{}:t,l=e.children,i=e.className,u=i===void 0?null:i,h=e.style,f=h===void 0?null:h,g=$(),d=c.useCallback(function(v,j){var E=Object.keys(v).sort(function(x,F){return x-F}),I=E.length>0?v[E[0]]:j;return E.forEach(function(x){x<g&&(I=v[x])}),I},[g]),C=c.useMemo(function(){return d(n,L)},[d,n]),y=c.useMemo(function(){return d(s,B)},[d,s]);return m.createElement("div",{className:u,style:f},m.Children.map(l,function(v,j){return m.cloneElement(v,{key:j,columnsCount:C,gutter:y})}))};b.propTypes={};const G=()=>{const[o,e]=c.useState(!1),r=N(n=>n.userImages);return r.length>0?a.jsx("div",{className:"container",children:a.jsx(b,{columnsCountBreakPoints:{350:1,750:2,900:3},gutterBreakpoints:{350:"12px",750:"16px",900:"24px"},children:a.jsx(w,{children:r.length>0&&r.map((n,t)=>a.jsx("div",{children:a.jsx(M,{to:`/view/${n._id}`,children:a.jsx(U,{src:n.url,alt:n.cloudImageName})})},t))})})}):a.jsxs("div",{className:"container mt-5 mx-auto",children:[a.jsx("div",{className:"w-100",children:a.jsxs("h3",{className:"text-center",children:["You haven't added any images yet.",a.jsx("div",{className:"d-grid mt-5",children:a.jsx("div",{className:"col-sm-12 col-md-4 mx-auto",children:a.jsx("button",{type:"button",className:"btn btn-success",onClick:()=>e(!0),children:"Add image now"})})})]})}),a.jsx(R,{showAddImageFormModal:o,setShowAddImageFormModal:e})]})},Q=c.lazy(()=>k(()=>import("./index-C8Xb3lMI.js").then(o=>o.G),__vite__mapDeps([0,1]))),V=()=>{const[o,e]=c.useState(!0),[r,n]=c.useState(null),{data:t,error:s,loading:l}=O(D,{fetchPolicy:"network-only"}),i=N(u=>u.setUserImages);return c.useEffect(()=>{e(l)},[l]),c.useEffect(()=>{!t||!t.FetchUserImagesQuery||(console.log("FetchUserImagesQuery: ",t.FetchUserImagesQuery),t.FetchUserImagesQuery&&i(t.FetchUserImagesQuery))},[t,i]),c.useEffect(()=>{if(s){const u=s.toString().split(":").pop();n(u)}},[s]),o?a.jsx(Q,{}):a.jsxs(a.Fragment,{children:[a.jsx(P,{}),a.jsxs("div",{className:"container",children:[a.jsxs("div",{className:"my-5",children:[a.jsx("h1",{className:"text-center",children:"Gallery"}),r&&a.jsxs("div",{className:"alert alert-dismissible alert-danger mt-5",children:[a.jsx("button",{type:"button",className:"btn-close",onClick:()=>n(null)}),r]})]}),a.jsx(G,{})]}),a.jsx(T,{})]})};export{V as default};
