import{r as a,b,u as j,d as f,j as e,N as v,F as E,e as N}from"./index-G_pGp2sZ.js";import{F as U}from"./User-C5gxugDK.js";const S=()=>{const[n,c]=a.useState(""),[i,d]=a.useState(""),[m,u]=a.useState(!1),[r,t]=a.useState(null),p=b(s=>s.setAuthUser),g=j(),[h,{loading:l}]=f(N,{variables:{loginUserInput:{usernameOrEmail:n,password:i}},onCompleted:s=>{if(s&&s.LoginUser)return p(s.LoginUser),g("/",{replace:!0})},onError:s=>{if(s){const o=s.toString().split(":").pop();t(o)}},update:(s,o)=>{s.writeQuery({query:U,data:{FetchActiveUser:o.data.LoginUser}})}});a.useEffect(()=>{u(l||r!==null)},[l,r]);const x=s=>{if(s.preventDefault(),!n||!i)return t("Please provide all user details to login!");h()};return e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsxs("div",{className:"container mt-5 col-12 col-md-8 col-lg-4",children:[e.jsx("h1",{className:"text-center",children:"Log In"}),r&&e.jsxs("div",{className:"alert alert-dismissible alert-danger mt-5",children:[e.jsx("button",{type:"button",className:"btn-close",onClick:()=>t(null)}),r]}),e.jsxs("form",{autoComplete:"off",noValidate:!0,onSubmit:x,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"usernameOrEmail",className:"form-label mt-4",children:"Username or Email"}),e.jsx("input",{type:"email",className:"form-control",id:"usernameOrEmail",placeholder:"Username or email",onChange:s=>c(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"form-label mt-4",children:"Password"}),e.jsx("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",autoComplete:"off",onChange:s=>d(s.target.value)})]}),e.jsx("div",{className:"d-grid gap-2 mt-5",children:e.jsx("button",{className:`btn btn-lg btn-success ${m??"disabled"}`,type:"submit",disabled:m,children:l?e.jsx("div",{className:"progress",children:e.jsx("div",{className:"progress-bar progress-bar-striped bg-info",role:"progressbar",style:{width:"100%"},"aria-valuenow":100,"aria-valuemin":0,"aria-valuemax":100})}):e.jsx("span",{children:"Login"})})})]})]}),e.jsx(E,{})]})};export{S as default};
